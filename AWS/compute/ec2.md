# EC2
- 최신 인스턴스일수록 일반적으로 가성비가 좋은 것은 맞지만, 용도에 특화된 인스턴스들이 있기 때문에 무조건적으로 모든 스펙이 우월한 것은 아님.

## RI(예약 인스턴스)
- 연단위 계약 

## EC2 Instance Types
1. 범용 (Mac, T4g, T3, T3a, T2, M6g, M5, M5a, M5n, M5zn, M4, A1)
    - 균형 있는 컴퓨팅, 메모리, 네트워킹 리소스 제공 / 웹 서버 및 코드 저장소에 적합
    - M -> 리소스의 균형적 사용
    - T -> 성능 순간 확장 가능
2. 컴퓨팅 최적화 (C6g, C6gn, C5, C5a, C5n, C4)
    - 고성능 프로세서를 사용하는 애플리케이션
    - 배치 처리워크로드, 미디어 트랜스코딩, 고성능 웹 서버, HPC, 과학적 모델링, 전용 게임 서버, 광고 서버 엔진, 기계 학습 추론 등
3. 메모리 최적화 (R6g, R5, R5a, R5b, R5n, R4, X1e, X1, 대용량메모리, z1d)
    - 메모리 집약적 애플리케이션, 인메모리 
4. 가속화된 컴퓨팅 (P4, P3, P2, Inf1, G4dn, G4ad, G3, F1)
    - GPU 기반 컴퓨팅을 통해 부동 소수점 수 계산, 그래픽 처리, 데이터 패턴 일치 등에 유리
    - 기계학습 훈련/추론 및 고성능 컴퓨팅에 적합 
5. 스토리지 최적화 (I3, I3en, D2, D3, D3en, H1)
    - 매우 큰 데이터 셋에 대해 많은 순차적 읽기 및 쓰기 액세스를 요하는 워크로드
    - 짧은 지연 시간, 수만 단위의 무작위 IOPS를 지원
    - I -> SSD 기반
    - D -> HDD 기반

## EC2 타입 및 용량 변경
- 앞단에 LB가 존재하고, LB 뒷단에 복수의 인스턴스로 연결되어 있기 때문에, LB의 target group에서 변경이 필요한 인스턴스를 제거하여, 요청 트래픽을 받지 않게 한 다음, 이 상태에서 중지-스펙 변경-재가동-타겟그룹 연결을 수행한다.

## EC2용 분산형 배치 그룹
분산된 환경의 컴퓨팅 노드로 인해 HPC 클러스터의 성능이 떨어질 수 있다. 분산형 배치 그룹을 통해 노드 간 통신에 latency가 짧은 네트워크 성능을 얻을 수 있다.
1. 클러스터 : 가용영역 내에서 인스턴스를 가깝게 압축
2. 파티션 : 인스턴스를 논리적 파티션에 분산하여, 다른 파티션의 인스턴스와 하드웨어를 공유하지 않게 함. Hadoop, Cassandra, Kafka 등의 워크로드에 필요.
3. 분산(Spread) : 소규모의 인스턴스 그룹을 다른 하드웨어로 분산하여 관련된 오류를 줄임
    - 일반적으로 아키텍처의 기존 네트워크 성능이 떨어짐
4. EFA (Elastic Fabric Adapter) : OS bypass networking 메커니즘을 통해 인스턴스간 저지연, low-jitter(불안정성) 채널을 제공
5. Amazon FSx for Lustre : HPC 등 속도가 중요한 워크로드에 Lustre를 적용. ms 초 미안의 지연시간, 최대 수백 Gbps의 처리량 및 최대 수백만 IOPS를 제공.

배치 그룹 변경은 인스턴스가 중지된 상태에서 변경이 가능함.

## EC2Rescue
- EC2 Linux & Windows Server 인스턴스의 문제를 진단
    - 인스턴스 연결 문제
    - OS 부팅 문제
    - 운영체제 로그 확인
- Systems Manager Automation 및 AWSSupport-ExecuteEC2Rescue를 통해 자동으로 실행 가능
