# ELB

ELB는 ALB, NLB로 나뉘어져 있는데, ALB 같은 경우, 계단 형식으로 트래픽이 뛰는 스파이크 형식의 트래픽 상승에 취약하기 때문에,
이를 해결하기 위해서 여러 개의 인스턴스를 미리 생성해놓는 pre-warming 처리를 하거나, NLB를 사용해야 한다.
- 자연스럽게 트래픽이 늘어난다면, ELB가 알아서 Scale up/out 
- 급격히 증가될 것이 예상되는 트래픽(ex> 이벤트, 온라인 생중계)에 있어서 pre-warming이 필요함

## ALB 라우팅 알고리즘
1. 라운드 로빈 
    - 시간 순서대로 차례대로
2. LOR(최소 미해결 요청)
    - 미해결 요청 수가 가장 적은 대상으로 요청을 보냄. 과부하된 리소스의 부하를 제거하는 데에 도움을 줌
    - NLB에서는 지원하지 않음

## 기능
1. 상태 확인
2. 교차 영역 로드 밸런싱 : 활성화 시 LB가 활성화된 모든 가용 영역에 있는 등록 대상 간 트래픽 분산
3. 프록시 프로토콜 : 활성화 시 원본 IP 주소, 대상 IP 주소, 포트 번호 등의 연결 정보가 요청 헤더에 추가
4. 고정 세션 : 사용자의 세션을 특정 인스턴스에 바인딩할 수 있는 기능 (세션 쿠기 만료 시간까지)
5. 연결 드레이닝 : 활성화 시 EC2 인스턴스 중 하나를 지워도, 디펜던시 있는 애플리케이션이 있을 수 있으므로 연결을 유지한다.

## ALB IP 주소 유형
- ipv4 : IPv4 주소를 사용하여 로드밸런서 연결
- dualstack : IPv4 및 IPv6 주소 사용하여 로드밸런서 연결
    - 활성화시 ELB에서 해당 로드밸런서의 AAAA DNS 레코드 제공
        - IPv4 주소 사용시 : A DNS 레코드 확인
        - IPv6 주소 사용시 : AAA DNS 레코드 확인

        